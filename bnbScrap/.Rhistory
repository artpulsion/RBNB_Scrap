a
a<-page[[4]] %>% html_nodes()
a <- page[[4]] %>% html_nodes(user.class)
a
# get the all users present on the page
user.class <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class)
page
page[[4]] %>% str_match_all("[0-9]+")
page[[4]] %>% str_match_all("[0-9]+") %>% as.numeric()
page[[4]] %>% str_match_all("[0-9]+") %>% as.integer()
page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.integer()
page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.integer() %>% max
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
id<-19405862
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class)
user.id <- page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.integer() %>% max
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
page <- webpage.url %>% html_nodes(user.class)
user.id <- page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric %>% max
library(bnbScrap)
results <- bnbScrap:::getUser(bnbScrap:::getHousesCity(city='Porto', is.df=TRUE))
results <- bnbScrap:::getUser(bnbScrap:::getHousesCity(city='Porto', is.df=TRUE))
library(bnbScrap)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
library(bnbScrap)
results <- bnbScrap:::getUser(bnbScrap:::getHousesCity(city='Porto', is.df=TRUE))
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
library(bnbScrap)
results <- bnbScrap:::getUser(bnbScrap:::getHousesCity(city='Porto', is.df=TRUE))
View(results)
id <- 10172608
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class)
# get the user id
user.id <- try(page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric %>% max)
page[[4]] %>% str_match_all("[0-9]+")
page[[4]]
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
page[[4]]
page[[4]][1]
page[[4]][2]
page[4
}
page[4]
page[4][1]
page[4][4]
page[4][3]
page[4][2]
page[4][1]
page
page
page[]
page[1]
page[1] %>% as.character()
page[1] %>% html_node()
html_node(page[1])
page[1] %>% html_node('href')
page[4] %>% html_node('href')
page[4] as.data.frame()
page[4] %>% as.data.frame
page[4] %>% as.data.frame()
page[4] %>% as.list()
a <- page[4] %>% as.list()
a
page <- webpage.url %>% html_nodes(user.class)
page
page[2]
page[2] %>% as.character
page[[2]] %>% as.character
page[[4]]
page[[4]]
# get the user id
user.id <- try(page[[2]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric %>% max)
page[[2]]
page[[4]] %>% str_match_all("[0-9]+")
page[[4]] %>% str_match_all("[0-9]+") %>% unlist()
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
user.class <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class)
page
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_2)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
page <- webpage.url %>% html_nodes(user.class_1)
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_1)
page
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
user.class_2 <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_2)
page
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% first()
page <- webpage.url %>% html_nodes(user.class_2) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% first()
user.id
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
id <- 13024929
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_1)
# get the user id
user.id <- try(page[[2]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric %>% max)
user.class_2 <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_2) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% first()
user.id
user.id <- sort(table(page), decreasing=TRUE) %>% names(.)
user.id
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the user id
user.id <- try(page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric %>% max)
id
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_1)
page
page[[1]]
page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
page[[1]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
a<-c(); a<-c(a,page[[1]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a
a<-c(); a<-c(a,page[[2]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c(); a<-c(a,page[[3]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c(); a<-c(a,page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a
a<-c();
a<-c(a,page[[1]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
a<-c(a,page[[1]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c();
a<-c(a,page[[1]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c(a,page[[2]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c(a,page[[3]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a<-c(a,page[[4]] %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric)
a
summarise_(a)
table(a)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
which(a < 10000 )
idx<-which(a < 10000 )
a<-a[-idx]
a
sort(table(a),decreasing=TRUE)[1:3]
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
page
length(page)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_1)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potentiel.user.ids <- c(potentiel.user.ids, page[[index]] %>% str_match_all("[0-9]+")) }
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potentiel.user.ids <- c(potentiel.user.ids, page[[index]] %>% str_match_all("[0-9]+")) }
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
l.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) }
potential.user.ids
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
potential.user.ids
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
sort(table(potential.user.ids),decreasing=TRUE)[1:3]
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
id <- 20179163
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_1 <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_1)
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
sort(table(potential.user.ids),decreasing=TRUE)[1:3]
# get the user id
potential.user.ids <- c()
page
# get the user id
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
potential.user.ids
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids
sort(table(potential.user.ids),decreasing=TRUE)[1:3]
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
sort(table(potential.user.ids),decreasing=TRUE)
user.class_2 <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_2) %>% html_attr('href')
page
user.id <- sort(table(page), decreasing=TRUE) %>% names(.)
user.id
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+"))
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+")
user.id
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist()
user.id
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
user.id
table(user.id)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
user.id
potential.user.ids
potential.user.ids %in% user.id
idx <- which(potential.user.ids %in% user.id)
id
idx
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_.potential.user <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_.potential.user)
# get the potential user ids
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
sort(table(potential.user.ids),decreasing=TRUE)
sort(table(potential.user.ids),decreasing=TRUE) %>% names(.)
sort(table(potential.user.ids),decreasing=TRUE) %>% names(.) %>% as.numeric
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
table(potential.user.ids) %>% names(.) %>% as.numeric
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the potential user ids
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
potential.user.ids %<>% table(potential.user.ids) %>% names(.) %<>% as.numeric
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the potential user ids
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_.user) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
user.id
idx <- which(potential.user.ids %in% user.id)
idx
potential.user.ids
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
user.id <- potential.user.ids[idx]
id <- 15155963
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_.potential.user <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_.potential.user)
# get the potential user ids
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_.user) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
idx <- which(potential.user.ids %in% user.id)
user.id <- potential.user.ids[idx]
library(bnbScrap)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
library(bnbScrap)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
getUser <- function(houses.city) {
# structure for all users
all.users.flats.ids <- c()
# convert factor as integer
houses.city %<>% mutate( bnb_flat_id = as.integer(as.character(bnb_flat_id)) )
# get the index of the iteration
index <- 0
# for each houses find the owner
for (id in houses.city$bnb_flat_id) {
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_.potential.user <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_.potential.user)
# get the potential user ids
potential.user.ids <- c()
for (index in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_.user) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
idx <- try(which(potential.user.ids %in% user.id))
if (inherits(idx, 'type-error')) next
user.id <- potential.user.ids[idx]
# fetch the user and his flat
user.flat.id <- c(user.id, id)
cat('\n')
cat(url.flat)
cat('\n')
# Information about the avancement
index = index + 1
cat( sprintf( 'Users: %d/%d \n', index, length(houses.city$bnb_flat_id)) )
# bind the each user . flat at each iteration in order to construct a base
all.users.flats.ids <- rbind(all.users.flats.ids, user.flat.id)
}
# convert the rows we binds as a dataframe
all.users.flats.ids %<>% data.frame
# rename the dataframe with the appropriate colnames which match with our api
colnames(all.users.flats.ids) = c('bnb_user_id', 'bnb_flat_id')
# get only the houses associated with a user
walley <- inner_join(houses.city, all.users.flats.ids, by='bnb_flat_id')
# return the joined dataframe
return(walley)
}
qs<-bnbScrap:::getUser(bnbScrap:::getHousesCity(city = 'Porto', is.df = TRUE))
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
portoHouses <- bnbScrap:::getHousesCity(city = 'Porto', is.df = TRUE)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
library(bnbScrap)
devtools::load_all()
res<-bnbScrap::getUser(portoHouses)
id <- portoHouses$bnb_flat_id[5]
id
id %>% as.numeric()
portoHouses %<>% mutate( bnb_flat_id = as.integer(as.character(bnb_flat_id)))
id <- portoHouses$bnb_flat_id[5]
id
# create the base url
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the all users present on the page
user.class_.potential.user <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_.potential.user)
page
# get the potential user ids
potential.user.ids <- c()
for (index.potential.user.ids in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index.potential.user.ids]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx.pot <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx.pot]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_.user) %>% html_attr('href')
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
idx <- try(which(potential.user.ids %in% user.id))
if (inherits(idx, 'type-error')) next
user.id <- potential.user.ids[idx]
user
page <- webpage.url %>% html_nodes(user.class_.potential.user)
page
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
res<-bnbScrap::getUser(portoHouses)
getUser(portoHouses)
id <- 11468596
# get the all users present on the page
user.class_.potential.user <- "._2930ex"
page <- webpage.url %>% html_nodes(user.class_.potential.user)
page
# get the potential user ids
potential.user.ids <- c()
for (index.potential.user.ids in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index.potential.user.ids]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx.pot <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx.pot]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
page[1]
page[[1]]
for (index.potential.user.ids in 1L:length(page)) { potential.user.ids <- c(potential.user.ids, page[[index.potential.user.ids]] %>% str_match_all("[0-9]+")) %>% unlist() %>% as.numeric() }
idx.pot <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx.pot]
potential.user.ids <- table(potential.user.ids) %>% names(.) %<>% as.numeric
potential.user.ids
# get the users ids and filter to find the good
user.class_.user <- "._110nrr2"
page <- webpage.url %>% html_nodes(user.class_.user) %>% html_attr('href')
page
user.id <- sort(table(page), decreasing=TRUE) %>% names(.) %>% str_match_all("[0-9]+") %>% unlist() %>% as.numeric
idx <- try(which(potential.user.ids %in% user.id))
if (inherits(idx, 'type-error')) next
user.id <- potential.user.ids[idx]
user.id
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the potential user in the current page
user.class_.potential.user <- "._2930ex"
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the potential user in the current page
class.potential.users <- "._2930ex"
page.potential.users <- webpage.url %>% html_nodes(class.potential.users)
page.potential.users
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# get the ids of the potential users of the current houses
potential.user.ids <- c()
for (index.potential.user.ids in 1L:length(page)) {
potential.user.ids <- c(potential.user.ids, page[[index.potential.user.ids]] %>% str_match_all("[0-9]+")) %>% unlist %>% as.numeric
}
potential.user.ids
idx.pot <- which(potential.user.ids < 10000) ; potential.user.ids <- potential.user.ids[-idx.pot]
idx.pot
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the potential user in the current page
class.potential.users <- "._2930ex"
page.potential.users <- webpage.url %>% html_nodes(class.potential.users)
page.potential.users
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
id
View(portoHouses)
ie
id
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
url.flat
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
# get the potential user in the current page
class.potential.users <- "._2930ex"
page.potential.users <- webpage.url %>% html_nodes(class.potential.users)
page.potential.users
page.potential.users <- webpage.url %>% html_nodes("._2930ex")
page.potential.users
id
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
webpage.url
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.fr/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
webpage.url
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.uk/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
source('C:/Users/sofianembarki/Desktop/bnbProject/bnbScrap/R/getUsers.R')
# acces to the house with his with his id
url.flat <- sprintf("https://www.airbnb.pt/rooms/%d", id)
# load the webpage
webpage.url <- read_html(url.flat)
webpage.url
